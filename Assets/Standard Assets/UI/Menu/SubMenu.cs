// ------------------------------------------------------------------------------
//  <autogenerated>
//      This code was generated by a tool.
//      Mono Runtime Version: 4.0.30319.1
// 
//      Changes to this file may cause incorrect behavior and will be lost if 
//      the code is regenerated.
//  </autogenerated>
// ------------------------------------------------------------------------------
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class SubMenu : KBNMenu
{
	public Button btnBack;
	protected ComposedMenu m_parent;
	public List<UIObject> componetList=new List<UIObject>();  
	public virtual void Init(ComposedMenu parent)
	{
		m_parent = parent;
		btnBack.OnClick = new System.Action<System.Object>(DefaultBack);
	}
	
	public virtual void DefaultBack(System.Object param)
	{
		m_parent.PopSubMenu();
	}
	
	protected override void DrawTitle()
	{
		if(title)
			title.Draw();
	}

	public override int Draw(){		
		if(!visible)
			return -1;
		
		
		//		bool e = GUI.enabled;
		//		GUI.enabled = !disabled;	
		
		//		m_top.rect.height=84;
		
		if(disabled && Event.current.type != EventType.Repaint)	
			return -1;
		DrawMask();
		Color oldColor = GUI.color;
		Matrix4x4 matrix = GUI.matrix; 
		Matrix4x4 scaleMatrix = Matrix4x4.Scale  ( new Vector3 (m_scale, m_scale, 1.0f));
		GUI.matrix = scaleMatrix*matrix ;
		GUI.color = m_color;	
		
//		if(adapterIphoneX){
//			
//			if(showIphoneXFrame){
//				GUI.BeginGroup(m_top.rect);
//				m_top.Draw();
//				GUI.EndGroup();
//			}
//			
//			Matrix4x4 scale2 = Matrix4x4.Scale  ( new Vector3 (scaleX, scaleY, 1.0f));
//			GUI.matrix = scale2*matrix ;
//			float f= rect.y*scaleY+offsetY;
//			GUI.BeginGroup(new Rect (rect.x,f,rect.width,rect.height));
//			DrawBackground();
//			DrawTitle();
//			DrawItem();
//			GUI.EndGroup();
//			
//			if(showIphoneXFrame){
//				GUI.matrix = scaleMatrix*matrix ;
//				GUI.BeginGroup(new Rect(m_bottom.rect.x,KBN._Global.ScreenHeight*scaleY+m_top.rect.height,m_bottom.rect.width,m_bottom.rect.height));
//				m_bottom.Draw();
//				GUI.EndGroup();
//			}
//			
//			
//			
//		}else{
			GUI.BeginGroup(rect);
			DrawBackground();
			DrawTitle();
			DrawItem();
			GUI.EndGroup();
//		}
		
		
		
		
		GUI.color = oldColor;
		GUI.matrix = matrix;
		return -1;
	}



	
	
}
